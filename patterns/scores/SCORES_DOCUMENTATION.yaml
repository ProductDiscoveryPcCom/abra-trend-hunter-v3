# =============================================================================
# DOCUMENTACI√ìN DE √çNDICES Y SCORES
# =============================================================================
#
# Este documento explica todos los scores utilizados en Abra Trend Hunter,
# incluyendo: definici√≥n, f√≥rmula, rangos interpretativos y franja temporal.
#
# =============================================================================

version: "2.0"
last_updated: "2024-12-04"

# =============================================================================
# √çNDICES PRINCIPALES
# =============================================================================

scores:

  # ---------------------------------------------------------------------------
  # BREAKOUT SCORE (Score principal de tendencia)
  # ---------------------------------------------------------------------------
  - id: "breakout_score"
    name: "Breakout Score"
    emoji: "üöÄ"
    description: |
      Mide la probabilidad de que un producto/keyword est√© en punto de 
      inflexi√≥n hacia una tendencia alcista. Combina se√±ales de Google Trends
      con la velocidad de crecimiento reciente.
    
    formula: |
      breakout_score = (
        trend_momentum √ó 0.40 +    # Crecimiento de Trends
        acceleration √ó 0.30 +       # Aceleraci√≥n del crecimiento
        consistency √ó 0.20 +        # Estabilidad de la se√±al
        volume_signal √ó 0.10        # Volumen de b√∫squeda base
      ) √ó 100
      
      Donde:
      - trend_momentum = (media_3m / media_12m) si media_12m > 0
      - acceleration = (√∫ltima_semana / media_mes) - 1
      - consistency = 1 - (desviaci√≥n_est√°ndar / media)
      - volume_signal = normalizado(volumen_estimado)
    
    timeframe: |
      - **Datos primarios**: √öltimos 12 meses de Google Trends
      - **Ventana de momentum**: √öltimos 3 meses vs. 12 meses
      - **Ventana de aceleraci√≥n**: √öltima semana vs. √∫ltimo mes
      - **Actualizaci√≥n**: Semanal (Google Trends actualiza semanalmente)
    
    ranges:
      - range: "90-100"
        label: "Explosivo"
        interpretation: "Tendencia en explosi√≥n. Actuar inmediatamente."
        color: "#10B981"
        
      - range: "70-89"
        label: "Breakout"
        interpretation: "Tendencia en breakout claro. Alta prioridad."
        color: "#22C55E"
        
      - range: "50-69"
        label: "Emergente"
        interpretation: "Tendencia emergente. Monitorear de cerca."
        color: "#EAB308"
        
      - range: "30-49"
        label: "Incipiente"
        interpretation: "Se√±ales tempranas. Investigar m√°s."
        color: "#F59E0B"
        
      - range: "0-29"
        label: "Estable/Bajo"
        interpretation: "Sin se√±ales de breakout. Producto establecido o nicho."
        color: "#6B7280"
    
    caveats:
      - "Score alto no garantiza demanda; puede ser hype sin conversi√≥n"
      - "Productos de nicho leg√≠timos pueden tener score bajo"
      - "Eventos puntuales (lanzamientos) pueden inflar temporalmente"

  # ---------------------------------------------------------------------------
  # TREND SCORE (Legacy - Google Trends puro)
  # ---------------------------------------------------------------------------
  - id: "trend_score"
    name: "Trend Score"
    emoji: "üìà"
    description: |
      Score basado exclusivamente en datos de Google Trends.
      Mide el nivel de inter√©s de b√∫squeda relativo al pico hist√≥rico.
    
    formula: |
      trend_score = (valor_actual / valor_m√°ximo_periodo) √ó 100
      
      Ajustado por:
      - Tendencia reciente (+/-10 puntos seg√∫n direcci√≥n)
      - Volatilidad (penaliza oscilaciones err√°ticas)
    
    timeframe: |
      - **Per√≠odo analizado**: Seg√∫n configuraci√≥n (default: 5 a√±os)
      - **Valor actual**: Media de √∫ltimas 4 semanas
      - **Referencia**: M√°ximo hist√≥rico en el per√≠odo
    
    ranges:
      - range: "80-100"
        label: "Pico"
        interpretation: "En o cerca de m√°ximos hist√≥ricos de inter√©s."
        
      - range: "60-79"
        label: "Alto"
        interpretation: "Inter√©s significativamente por encima de la media."
        
      - range: "40-59"
        label: "Medio"
        interpretation: "Inter√©s moderado, en l√≠nea con hist√≥rico."
        
      - range: "20-39"
        label: "Bajo"
        interpretation: "Inter√©s por debajo de la media hist√≥rica."
        
      - range: "0-19"
        label: "M√≠nimo"
        interpretation: "Inter√©s muy bajo o producto en declive."

  # ---------------------------------------------------------------------------
  # POTENTIAL SCORE (Potencial de crecimiento)
  # ---------------------------------------------------------------------------
  - id: "potential_score"
    name: "Potential Score"
    emoji: "‚≠ê"
    description: |
      Estima el potencial de crecimiento futuro bas√°ndose en la 
      distancia al m√°ximo hist√≥rico y la trayectoria reciente.
    
    formula: |
      potential_score = (
        headroom √ó 0.50 +          # Margen hasta m√°ximo hist√≥rico
        growth_trajectory √ó 0.30 + # Trayectoria de crecimiento
        recovery_signal √ó 0.20     # Se√±al de recuperaci√≥n si ven√≠a cayendo
      ) √ó 100
      
      Donde:
      - headroom = 100 - (valor_actual / valor_m√°ximo √ó 100)
      - growth_trajectory = regresi√≥n_lineal(√∫ltimos_3m)
      - recovery_signal = 1 si valle reciente + subida, 0 si no
    
    timeframe: |
      - **Headroom**: Comparaci√≥n con m√°ximo de todo el per√≠odo
      - **Trayectoria**: √öltimos 3 meses
      - **Recovery**: √öltimos 6 meses para detectar valles
    
    ranges:
      - range: "80-100"
        label: "Alto Potencial"
        interpretation: "Mucho margen de crecimiento. Puede multiplicarse."
        
      - range: "60-79"
        label: "Buen Potencial"
        interpretation: "Margen significativo de crecimiento."
        
      - range: "40-59"
        label: "Potencial Moderado"
        interpretation: "Algo de margen pero limitado."
        
      - range: "0-39"
        label: "Bajo Potencial"
        interpretation: "Cerca de m√°ximos o en declive sostenido."
    
    caveats:
      - "Alto potencial puede significar que nunca recuperar√° el pico"
      - "Combinar con Breakout Score para validar direcci√≥n"

  # ---------------------------------------------------------------------------
  # HYPE SCORE (Intensidad de contenido en YouTube)
  # ---------------------------------------------------------------------------
  - id: "hype_score"
    name: "Hype Score"
    emoji: "üî•"
    description: |
      Mide la intensidad del "hype" de un producto bas√°ndose en la 
      velocidad de creaci√≥n de contenido en YouTube relativo al tiempo
      desde el primer video detectado.
    
    formula: |
      videos_per_week = total_videos / weeks_since_first_video
      
      base_score = (
        10 si videos_per_week < 0.5
        30 si 0.5 <= videos_per_week < 1
        50 si 1 <= videos_per_week < 2
        70 si 2 <= videos_per_week < 5
        90 si videos_per_week >= 5
      )
      
      # Bonus por recencia
      if videos_last_30_days >= 5:
        hype_score = min(100, base_score + 20)
      else:
        hype_score = base_score
    
    timeframe: |
      - **Per√≠odo base**: Desde primer video detectado hasta hoy
      - **Ventana de recencia**: √öltimos 30 d√≠as
      - **Datos de YouTube**: Hasta 50 videos por b√∫squeda
    
    ranges:
      - range: "90-100"
        label: "Exploding üöÄ"
        interpretation: |
          Producto en explosi√≥n viral. Contenido masivo en poco tiempo.
          - T√≠pico de lanzamientos esperados
          - Puede ser hype inflado o demanda real
        
      - range: "70-89"
        label: "Hot üî•"
        interpretation: |
          Producto muy activo. Alta frecuencia de contenido.
          - Atenci√≥n sostenida de creadores
          - Buena se√±al de inter√©s de mercado
        
      - range: "50-69"
        label: "Warm üå°Ô∏è"
        interpretation: |
          Actividad moderada. Producto con tracci√≥n.
          - Suficiente contenido para validar inter√©s
          - No es viral pero hay demanda
        
      - range: "30-49"
        label: "Cooling ‚ùÑÔ∏è"
        interpretation: |
          Actividad baja. Producto enfri√°ndose o muy nicho.
          - Puede ser producto maduro/establecido
          - O nicho muy espec√≠fico
        
      - range: "0-29"
        label: "Cold üßä"
        interpretation: |
          Muy poca actividad. Producto sin tracci√≥n.
          - Puede ser muy nuevo a√∫n
          - O producto fallido/discontinuado
    
    caveats:
      - "Hype alto no implica ventas; puede ser producto controvertido"
      - "Productos chinos pueden tener menos cobertura en YouTube occidental"
      - "Score puede estar sesgado por un solo creador prol√≠fico"

  # ---------------------------------------------------------------------------
  # PRODUCT OPPORTUNITY SCORE (Score de oportunidad combinado)
  # ---------------------------------------------------------------------------
  - id: "product_opportunity_score"
    name: "Product Opportunity Score"
    emoji: "üéØ"
    description: |
      Score compuesto que combina m√∫ltiples se√±ales para estimar la 
      oportunidad de producto desde la perspectiva de un retailer.
      Dise√±ado espec√≠ficamente para decisiones de compra de stock.
    
    formula: |
      product_opportunity_score = (
        hype_component +           # M√°x 30 puntos
        buying_intent_component +  # M√°x 25 puntos
        market_coverage_component +# M√°x 25 puntos
        niche_activity_component   # M√°x 20 puntos
      )
      
      Donde:
      - hype_component = hype_score √ó 0.30
      - buying_intent_component:
          +15 si where_to_buy >= 3 se√±ales
          +10 si where_to_buy >= 1
          +10 si europe_mentions >= 2
          +5 si europe_mentions >= 1
      - market_coverage_component = mercados_objetivo_cubiertos √ó 5
      - niche_activity_component = min(20, budget_alternatives √ó 4)
    
    timeframe: |
      - **Hype**: Basado en YouTube (ver Hype Score)
      - **Buying Intent**: An√°lisis de videos √∫ltimos 30-90 d√≠as
      - **Market Coverage**: Idiomas detectados en videos
      - **Niche Activity**: Alternativas budget mencionadas
    
    ranges:
      - range: "80-100"
        label: "Oportunidad Excelente"
        interpretation: |
          Producto con todas las se√±ales alineadas:
          - Alto hype + demanda de compra + cobertura de mercado
          - ACCI√ìN: Priorizar para an√°lisis de compra
        
      - range: "60-79"
        label: "Buena Oportunidad"
        interpretation: |
          Se√±ales positivas en mayor√≠a de dimensiones.
          - ACCI√ìN: Incluir en shortlist, investigar m√°s
        
      - range: "40-59"
        label: "Oportunidad Moderada"
        interpretation: |
          Algunas se√±ales positivas, otras d√©biles o ausentes.
          - ACCI√ìN: Monitorear, puede mejorar
        
      - range: "20-39"
        label: "Oportunidad Baja"
        interpretation: |
          Pocas se√±ales positivas.
          - ACCI√ìN: Solo si hay raz√≥n estrat√©gica espec√≠fica
        
      - range: "0-19"
        label: "Sin Oportunidad Clara"
        interpretation: |
          Sin se√±ales que justifiquen inversi√≥n.
          - ACCI√ìN: Descartar o investigar por qu√©
    
    caveats:
      - "Depende de calidad de datos de YouTube"
      - "Productos muy nuevos pueden puntuar bajo por falta de contenido"
      - "Productos B2B pueden tener menos presencia en YouTube"

  # ---------------------------------------------------------------------------
  # BUYING INTENT SCORE (Intenci√≥n de compra)
  # ---------------------------------------------------------------------------
  - id: "buying_intent_score"
    name: "Buying Intent Score"
    emoji: "üõí"
    description: |
      Mide las se√±ales expl√≠citas de intenci√≥n de compra detectadas
      en contenido de YouTube, especialmente para mercados europeos.
    
    formula: |
      buying_intent_score = suma de se√±ales ponderadas
      
      Peso por tipo de se√±al:
      - "where_to_buy" (d√≥nde comprar): 3 puntos
      - "price" (precio): 2 puntos
      - "availability" (disponibilidad): 2 puntos
      - "europe" (menciones Europa): 3 puntos
      
      Normalizado a 0-100 basado en umbral de 15 se√±ales = 100
    
    timeframe: |
      - **Fuente**: T√≠tulos y descripciones de videos de YouTube
      - **Per√≠odo**: Videos incluidos en b√∫squeda (t√≠picamente √∫ltimos 12m)
    
    ranges:
      - range: "70-100"
        label: "Alta Intenci√≥n"
        interpretation: |
          Demanda activa y expl√≠cita. Usuarios buscando comprar.
        
      - range: "40-69"
        label: "Intenci√≥n Moderada"
        interpretation: |
          Inter√©s en compra pero no urgente/masivo.
        
      - range: "0-39"
        label: "Baja Intenci√≥n"
        interpretation: |
          Inter√©s informativo m√°s que transaccional.

  # ---------------------------------------------------------------------------
  # CONTENT FRESHNESS SCORE (Frescura de contenido)
  # ---------------------------------------------------------------------------
  - id: "content_freshness"
    name: "Content Freshness"
    emoji: "üïê"
    description: |
      Eval√∫a qu√© tan reciente es el contenido disponible sobre el producto.
      Indicador de si el producto sigue siendo relevante.
    
    formula: |
      Basado en videos en ventanas de tiempo:
      - "very_fresh": 5+ videos en √∫ltimos 30 d√≠as
      - "fresh": 2+ videos en 30d O 10+ en 90d
      - "aging": 3+ videos en 90d
      - "stale": Menos de 3 videos en 90d
    
    timeframe: |
      - **Ventana primaria**: √öltimos 30 d√≠as
      - **Ventana secundaria**: √öltimos 90 d√≠as
    
    ranges:
      - value: "very_fresh"
        label: "üü¢ Muy Activo"
        interpretation: "Contenido constante. Producto en auge."
        
      - value: "fresh"
        label: "üü° Activo"
        interpretation: "Contenido reciente. Producto relevante."
        
      - value: "aging"
        label: "üü† Envejeciendo"
        interpretation: "Contenido desacelerando. Monitorear."
        
      - value: "stale"
        label: "üî¥ Estancado"
        interpretation: "Poco contenido reciente. Producto maduro o en declive."

# =============================================================================
# NOTAS GENERALES
# =============================================================================

general_notes:
  - title: "Combinaci√≥n de Scores"
    content: |
      Los scores est√°n dise√±ados para usarse en conjunto:
      - Breakout Score + Potential Score = Oportunidad de tendencia
      - Hype Score + Buying Intent = Validaci√≥n de demanda
      - Product Opportunity = Score integrador para decisiones
  
  - title: "Limitaciones de Datos"
    content: |
      - Google Trends: Datos relativos, no absolutos
      - YouTube: Limitado a 50 videos por b√∫squeda, quota de API
      - Idiomas: Detecci√≥n heur√≠stica, no 100% precisa
  
  - title: "Frecuencia de Actualizaci√≥n"
    content: |
      - Google Trends: Actualiza semanalmente
      - YouTube: Datos en tiempo real pero quota limitada
      - Recomendaci√≥n: An√°lisis completo semanal, spot checks diarios
